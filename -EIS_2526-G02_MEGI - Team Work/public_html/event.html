<!DOCTYPE html>
<html lang="en">
<head>
  <title>Events</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Global routing hints used by nav.js -->
  <meta name="app-base" content="">
  <meta name="item-page-path" content="index.html">
  <meta name="events-page-path" content="event.html">
  <meta name="collection-page-path" content="collection-page.html">
  <meta name="collectors-page-path" content="Homepage.login.html">
  <meta name="community-page-path" content="Team_page2.html">

  <!-- Styles -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link rel="stylesheet" href="css/eventcss.css">
</head>
<body>
  <div class="entire-page">
    <!-- Sidebar with global nav targets -->
    <aside class="side-menu">
      <!-- Action button (handled by CollectaNav.onCreate) -->
      <button class="new-collection" data-nav="create" type="button">Create New Collection</button>

      <!-- Primary navigation (pages) -->
      <nav class="nav">
        <a class="nav-link" data-nav="collector"   href="#">Collector</a>
        <a class="nav-link" data-nav="collections" href="#">Collections</a>
        <a class="nav-link active" data-nav="events" href="#">Events</a>
        <a class="nav-link" data-nav="community"   href="#">Community</a>
      </nav>
    </aside>

    <!-- Top bar with actions -->
    <header class="topmenu" role="banner">
      <div class="brand">Collecta<span class="brand">•</span>Hub</div>
      <nav class="actions">
        <button type="button" class="btn btn--ghost" aria-label="Open profile" onclick="window.location.href='profile_page1.html';">
          <svg aria-hidden="true" class="icon" role="img" viewBox="0 0 24 24">
            <path d="M12 12a5 5 0 1 0-5-5 5 5 0 0 0 5 5Zm0 2c-5.33 0-8 2.67-8 6v1h16v-1c0-3.33-2.67-6-8-6Z"></path>
          </svg>
          <span>Profile</span>
        </button>
      </nav>
    </header>

    <!-- Main content -->
    <main id="main-content" class="middle" aria-label="Events main content">
      <div class="rank-add">
        <div class="filter">
          <button id="coming" class="filter-button" type="button">Coming</button>
          <button id="past" class="filter-button" type="button">Past</button>
          <button id="all" class="filter-button" type="button">All</button>
        </div>
        <button id="new-event" class="new-button" type="button">+New Event</button>
      </div>

      <div id="event-list" class="list"></div>

      <!-- Create/Edit dialog -->
      <dialog id="event-dialog">
        <form id="event-form" action="events_api.php" method="POST" enctype="multipart/form-data">
          <h3 id="form-title">New event</h3>

          <!--<label>Collection* 
            <input type="text" id="form-collection" name="collection" required />
          </label>-->
          <label>Collection*
            <select id="form-collection" name="collection" required>
                <option value="">-- Select collection --</option>
    <!-- Lägg till fler collections här, med rätt ID och namn -->
            </select>
          </label>

          <label>Name*       
            <input type="text" id="form-name" name="name" required />
          </label>
          <label>Location*   
            <input type="text" id="form-location" name="location" required />
          </label>
          <label>Date*       
            <input type="date" id="form-date" name="date" required />
          </label>
          <label>Description*
            <textarea id="form-desc" name="description" required></textarea>
          </label>

          <div id="image-row">
            <label for="form-image">Image</label>
            <input id="form-image" name="image" type="file" accept="image/*">
          </div>

          <p id="form-error" aria-live="polite"></p>

          <div class="form-actions">
            <button id="cancel" type="button" value="cancel">Cancel</button>
            <button id="save" type="submit" value="default">Save</button>
          </div>
        </form>
      </dialog>
    </main>
  </div>

  <!-- Details dialog -->
  <dialog id="detail-dialog">
    <article class="event-details">
      <img id="detail-image"
           src="data:image/gif;base64,R0lGODlhAQABAAAAACw="
           alt=""
           style="display:none" />
      <div class="event-details-body">
        <h2 id="detail-title">Event details</h2>
        <div class="details-chips">
          <span id="detail-collection" class="chip"></span>
          <span id="detail-date" class="chip"></span>
          <span id="detail-location" class="chip"></span>
          <span id="detail-rating" class="chip"></span>
        </div>
        <p id="detail-desc"></p>
        <div class="dialog-actions">
          <button id="detail-close" value="cancel">Close</button>
        </div>
      </div>
    </article>
  </dialog>

  <!-- Card template (mantido se quiser reutilizar em outro fluxo, mas o JS cria os cards via DOM) -->
  <template id="events">
    <article class="event-posts">
      <img class="event-picture" src="images/default.jpg" alt="Event image">

      <div class="event-content">
        <div class="event-post-title">
          <span class="badge"></span>
        </div>

        <div class="event-post-body">
          <h3 class="event-title"></h3>
          <div class="event-info">
            <div class="chip">
              <span class="chip-date">Date:</span>
              <span class="chip-location">Location:</span>
            </div>
          </div>
        </div>

        <div class="post-actions">
          <button class="edit-button" type="button">Edit</button>
          <button class="delete-button" type="button">Delete</button>
        </div>
      </div>

      <div class="rating" aria-label="Rate this event">
        <span class="star" data-value="1" aria-hidden="true">*</span>
        <span class="star" data-value="2" aria-hidden="true">*</span>
        <span class="star" data-value="3" aria-hidden="true">*</span>
        <span class="star" data-value="4" aria-hidden="true">*</span>
        <span class="star" data-value="5" aria-hidden="true">*</span>
      </div>
    </article>
  </template>

  <!-- Scripts -->
  <script src="common/nav.js" defer></script>
  <script src="js/eventjs.js" defer></script>
</body>
</html>